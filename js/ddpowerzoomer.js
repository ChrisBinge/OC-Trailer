jQuery.noConflict();var ddpowerzoomer={dsetting:{defaultpower:2,powerrange:[2,7],magnifiersize:[75,75]},mousewheelevt:(/Firefox/i.test(navigator.userAgent))?"DOMMouseScroll":"mousewheel",$magnifier:{outer:null,inner:null,image:null},activeimage:null,movemagnifier:function(i,j,d){var o=ddpowerzoomer.activeimage;var p=o.info;var n=p.coords;var c=ddpowerzoomer.$magnifier;var r=p.magdimensions;var b=p.power.current;var q=p.power.range;var m=i.pageX-n.left;var l=i.pageY-n.top;if(j==true){if(i.pageX>=n.left&&i.pageX<=n.right&&i.pageY>=n.top&&i.pageY<=n.bottom){c.outer.css({left:i.pageX-r[0]/2,top:i.pageY-r[1]/2})}else{ddpowerzoomer.activeimage=null;c.outer.hide()}}else{if(d){var a=p.dimensions;var h=(d=="in")?Math.min(b+1,q[1]):Math.max(b-1,q[0]);var f=[a[0]*h,a[1]*h];c.image.css({width:f[0],height:f[1]});p.power.current=h}}b=p.power.current;var k=-m*b+r[0]/2;var g=-l*b+r[1]/2;c.inner.css({left:k,top:g})},setupimage:function(d,c,a){var b=jQuery.extend({},ddpowerzoomer.dsetting,a);var e=d(c);c.info={power:{current:b.defaultpower,range:b.powerrange},magdimensions:b.magnifiersize,dimensions:[e.width(),e.height()],coords:null};e.unbind("mouseenter").mouseenter(function(i){var f=ddpowerzoomer.$magnifier;f.outer.css({width:b.magnifiersize[0],height:b.magnifiersize[1]});var j=e.offset();var g=c.info.power.current;f.inner.html('<img src="'+a.largeimagesrc+'"/>');f.image=f.outer.find("img:first").css({width:c.info.dimensions[0]*g,height:c.info.dimensions[1]*g});var h={left:j.left,top:j.top,right:j.left+c.info.dimensions[0],bottom:j.top+c.info.dimensions[1]};c.info.coords=h;f.outer.show();ddpowerzoomer.activeimage=c})},init:function(b){var a=b('<div style="position:absolute;width:100px;height:100px;display:none;overflow:hidden;border:1px solid black;" />').append('<div style="position:relative;left:0;top:0;" />').appendTo(document.body);ddpowerzoomer.$magnifier={outer:a,inner:a.find("div:eq(0)"),image:null};a=ddpowerzoomer.$magnifier;b(document).unbind("mousemove.trackmagnifier").bind("mousemove.trackmagnifier",function(c){if(ddpowerzoomer.activeimage){ddpowerzoomer.movemagnifier(c,true)}});a.outer.bind(ddpowerzoomer.mousewheelevt,function(c){if(ddpowerzoomer.activeimage){var d=c.detail?c.detail*(-120):c.wheelDelta;if(d<=-120){ddpowerzoomer.movemagnifier(c,false,"out")}else{ddpowerzoomer.movemagnifier(c,false,"in")}c.preventDefault()}})}};jQuery.fn.addpowerzoom=function(a){var b=jQuery;return this.each(function(){if(this.tagName!="IMG"){return true}if(typeof a=="undefined"){a={}}if(a.largeimage&&a.largeimage.length>0){a.preloadimg=new Image();a.preloadimg.src=a.largeimage}var c=b(this);a.largeimagesrc=(a.preloadimg)?a.preloadimg.src:c.attr("src");if(parseInt(this.style.width)>0&&parseInt(this.style.height)>0){ddpowerzoomer.setupimage(b,this,a)}else{if(this.complete){ddpowerzoomer.setupimage(b,this,a)}else{c.bind("load",function(){ddpowerzoomer.setupimage(b,this,a)})}}})};jQuery(document).ready(function(a){ddpowerzoomer.init(a)});